{% extends 'base.html' %}
{% load static %}
{% block sidebar %}
  {% include 'manifest_nav.html' %}
  {% include 'site_nav.html' %}
{% endblock sidebar %}
{% block content %}
  <!-- Main Content -->
  <div id="content">
    <!-- Begin Page Content -->
    <div class="container-fluid">
      <!-- Page Heading and top level Button -->
      <form method="post">
        {% csrf_token %}
        <div class="d-sm-flex align-items-center justify-content-between mb-4">
          <h1 class="h3 mb-0 text-gray-800">{{ manifest.manifest_tracking_number }}</h1>
          <div>
            <button id="" type="submit" class=" d-none d-sm-inline-block btn btn-sm btn-success shadow-sm">
              <i class="fa-solid fa-floppy-disk text-white"></i> Save
            </button>
          </div>
        </div>
        <div class="container-fluid">
          <!-- Start Manifest Cards, this row encompasses all col/cards-->
          <div class="row">
            <div class="col">
              <!-- start manifest form fields -->

              <!-- General Info -->
              <div class="card shadow-sm m-3">
                <div class="card-header bg-secondary">
                  <p class="h4 font-weight-bold text-light my-1 ">{{ manifest }}</p>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <p class="font-weight-bold">Manifest Tracking Number</p>
                      {{ manifest.mtn }}
                    </div>
                    <div class="col">
                      <p class="font-weight-bold">Manifest Type</p>
                      {{ manifest.submission_type }}
                    </div>
                    <div class="col">
                      <p class="font-weight-bold">Status</p>
                      {{ form.status }}
                    </div>
                  </div>
                </div>
              </div>
              <!-- Generator Info -->
              <div class="card shadow-sm m-3">
                <div class="card-header bg-secondary">
                  <p class="h5 text-light my-1">1-5. Generator Info</p>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <p class="font-weight-bold">EPA ID</p>
                      {{ form.generator }}
                    </div>
                  </div>
                </div>
              </div>
              <!-- Transporter Info -->
              <div class="card shadow-sm m-3">
                <div class="card-header bg-secondary">
                  <p class="h5 text-light my-1">6-7. Transporter Info</p>
                </div>
                <div class="card-body">
                  <div class="row">
                    <table class="table">
                      <thead>
                      <tr>
                        <th scope="col">Order</th>
                        <th scope="col">EPA ID</th>
                        <th scope="col">Name</th>
                      </tr>
                      </thead>
                      <tbody>
                      {% for transporter in transporters %}
                        <tr>
                          <th scope="row">{{ transporter.order }}</th>
                          <td>{{ transporter.epa_id }}</td>
                          <td>{{ transporter.name }}</td>
                        </tr>
                      {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- Designated Facility Info -->
              <div class="card shadow-sm m-3">
                <div class="card-header bg-secondary">
                  <p class="h5 text-light my-1">8. Receiving Facility Info</p>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <p class="font-weight-bold">EPA ID</p>
                      {{ form.tsd }}
                    </div>
                  </div>
                </div>
              </div>
              <!-- Waste Lines Info -->
              <div class="card shadow-sm m-3">
                <div class="card-header bg-secondary">
                  <p class="h5 text-light my-1">9-13. Waste Info</p>
                </div>
                <div class="card-body">
                  <div class="row">
                    <table class="table">
                      <thead>
                      <tr>
                        <th scope="col">Line Number</th>
                        <th scope="col">Total Quantity</th>
                        <th scope="col">Waste Codes</th>
                      </tr>
                      </thead>
                      <tbody>
                      {% for waste_line in waste_lines %}
                        <tr>
                          <th scope="row">{{ waste_line.line_number }}</th>
                          <td>{{ waste_line.quantity }}</td>
                          <td>{{ waste_line.hazardous_waste }}</td>
                        </tr>
                      {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- Additional Info -->
              <div class="card shadow-sm m-3">
                <div class="card-header bg-secondary">
                  <p class="h5 text-light">14. Handling Instructions and Additional info</p>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <p class="font-weight-bold">Additional Info</p>
                      {{ form.additional_info }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <!-- End of Main Content -->
  </div>
  <!-- Page level plugins -->
  <script src="{% static 'js/trak/sync-db.js' %}"></script>
{% endblock content %}
